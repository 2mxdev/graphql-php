<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Mutations and Input Types - graphql-php</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Mutations and Input Types";
    var mkdocs_page_input_path = "type-system\\input-types.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> graphql-php</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">About</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../getting-started/">Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../complementary-tools/">Complementary Tools</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Type Definitions</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../object-types/">Object Types</a>
                </li>
                <li class="">
                    
    <a class="" href="../scalar-types/">Scalar Types</a>
                </li>
                <li class="">
                    
    <a class="" href="../enum-types/">Enumeration Types</a>
                </li>
                <li class="">
                    
    <a class="" href="../lists-and-nonnulls/">Lists and Non-Null</a>
                </li>
                <li class="">
                    
    <a class="" href="../interfaces/">Interfaces</a>
                </li>
                <li class="">
                    
    <a class="" href="../unions/">Unions</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Mutations and Input Types</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#mutations">Mutations</a></li>
    

    <li class="toctree-l3"><a href="#about-input-and-output-types">About Input and Output Types</a></li>
    

    <li class="toctree-l3"><a href="#input-object-type">Input Object Type</a></li>
    

    <li class="toctree-l3"><a href="#configuration-options">Configuration options</a></li>
    

    <li class="toctree-l3"><a href="#using-input-object-type">Using Input Object Type</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../directives/">Directives</a>
                </li>
                <li class="">
                    
    <a class="" href="../schema/">Schema</a>
                </li>
                <li class="">
                    
    <a class="" href="../type-language/">Using Type Language</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../executing-queries/">Executing Queries</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../data-fetching/">Fetching Data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../error-handling/">Handling Errors</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../security/">Security</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../how-it-works/">How it works</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../reference/">Class Reference</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">graphql-php</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Type Definitions &raquo;</li>
        
      
    
    <li>Mutations and Input Types</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="mutations">Mutations</h1>
<p>Mutation is just a field of a regular <a href="../object-types/">Object Type</a> with arguments.
For GraphQL PHP runtime there is no difference between query fields with arguments and mutations.
They are executed <a href="http://facebook.github.io/graphql/#sec-Mutation">almost</a> identically. 
To some extent, Mutation is just a convention described in the GraphQL spec.</p>
<p>Here is an example of a mutation operation:</p>
<pre><code class="graphql">mutation CreateReviewForEpisode($ep: EpisodeInput!, $review: ReviewInput!) {
  createReview(episode: $ep, review: $review) {
    stars
    commentary
  }
}
</code></pre>

<p>To execute such a mutation, you need <strong>Mutation</strong> type <a href="../schema/">at the root of your schema</a>:</p>
<pre><code class="php">&lt;?php
use GraphQL\Type\Definition\Type;
use GraphQL\Type\Definition\ObjectType;

$myMutationType = new ObjectType([
    'name' =&gt; 'Mutation',
    'fields' =&gt; [
        // List of mutations:
        'createReview' =&gt; [
            'args' =&gt; [
                'episode' =&gt; Type::nonNull($episodeInputType),
                'review' =&gt; Type::nonNull($reviewInputType)
            ],
            'type' =&gt; new ObjectType([
                'name' =&gt; 'CreateReviewOutput',
                'fields' =&gt; [
                    'stars' =&gt; ['type' =&gt; Type::int()],
                    'commentary' =&gt; ['type' =&gt; Type::string()]
                ]
            ]),
        ],
        // ... other mutations
    ]
]);
</code></pre>

<p>As you can see, the only difference from regular object type is the semantics of field names
(verbs vs nouns).</p>
<p>Also as we see arguments can be of complex types. To leverage the full power of mutations 
(and field arguments in general) you must learn how to create complex input types.</p>
<h1 id="about-input-and-output-types">About Input and Output Types</h1>
<p>All types in GraphQL are of two categories: <strong>input</strong> and <strong>output</strong>.</p>
<ul>
<li>
<p><strong>Output</strong> types (or field types) are: <a href="../scalar-types/">Scalar</a>, <a href="../enum-types/">Enum</a>, <a href="../object-types/">Object</a>, 
<a href="../interfaces/">Interface</a>, <a href="../unions/">Union</a></p>
</li>
<li>
<p><strong>Input</strong> types (or argument types) are: <a href="../scalar-types/">Scalar</a>, <a href="../enum-types/">Enum</a>, InputObject</p>
</li>
</ul>
<p>Obviously, <a href="../lists-and-nonnulls/">NonNull and List</a> types belong to both categories depending on their 
inner type.</p>
<p>Until now all examples of field <strong>arguments</strong> in this documentation were of <a href="../scalar-types/">Scalar</a> or 
<a href="../enum-types/">Enum</a> types. But you can also pass complex objects. </p>
<p>This is particularly valuable in case of mutations, where input data might be rather complex.</p>
<h1 id="input-object-type">Input Object Type</h1>
<p>GraphQL specification defines Input Object Type for complex inputs. It is similar to ObjectType
except that it's fields have no <strong>args</strong> or <strong>resolve</strong> options and their <strong>type</strong> must be input type.</p>
<p>In graphql-php <strong>Input Object Type</strong> is an instance of <code>GraphQL\Type\Definition\InputObjectType</code> 
(or one of it subclasses) which accepts configuration array in constructor:</p>
<pre><code class="php">&lt;?php
use GraphQL\Type\Definition\Type;
use GraphQL\Type\Definition\InputObjectType;

$filters = new InputObjectType([
    'name' =&gt; 'StoryFiltersInput',
    'fields' =&gt; [
        'author' =&gt; [
            'type' =&gt; Type::id(),
            'description' =&gt; 'Only show stories with this author id'
        ],
        'popular' =&gt; [
            'type' =&gt; Type::boolean(),
            'description' =&gt; 'Only show popular stories (liked by several people)'
        ],
        'tags' =&gt; [
            'type' =&gt; Type::listOf(Type::string()),
            'description' =&gt; 'Only show stories which contain all of those tags'
        ]
    ]
]);
</code></pre>

<p>Every field may be of other InputObjectType (thus complex hierarchies of inputs are possible)</p>
<h1 id="configuration-options">Configuration options</h1>
<p>The constructor of InputObjectType accepts array with only 3 options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><code>string</code></td>
<td><strong>Required.</strong> Unique name of this object type within Schema</td>
</tr>
<tr>
<td>fields</td>
<td><code>array</code> or <code>callable</code></td>
<td><strong>Required</strong>. An array describing object fields or callable returning such an array (see below).</td>
</tr>
<tr>
<td>description</td>
<td><code>string</code></td>
<td>Plain-text description of this type for clients (e.g. used by <a href="https://github.com/graphql/graphiql">GraphiQL</a> for auto-generated documentation)</td>
</tr>
</tbody>
</table>
<p>Every field is an array with following entries:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><code>string</code></td>
<td><strong>Required.</strong> Name of the input field. When not set - inferred from <strong>fields</strong> array key</td>
</tr>
<tr>
<td>type</td>
<td><code>Type</code></td>
<td><strong>Required.</strong> Instance of one of <a href="./">Input Types</a> (<strong>Scalar</strong>, <strong>Enum</strong>, <strong>InputObjectType</strong> + any combination of those with <strong>nonNull</strong> and <strong>listOf</strong> modifiers)</td>
</tr>
<tr>
<td>description</td>
<td><code>string</code></td>
<td>Plain-text description of this input field for clients (e.g. used by <a href="https://github.com/graphql/graphiql">GraphiQL</a> for auto-generated documentation)</td>
</tr>
<tr>
<td>defaultValue</td>
<td><code>scalar</code></td>
<td>Default value of this input field. Use the internal value if specifying a default for an <strong>enum</strong> type</td>
</tr>
</tbody>
</table>
<h1 id="using-input-object-type">Using Input Object Type</h1>
<p>In the example above we defined our InputObjectType. Now let's use it in one of field arguments:</p>
<pre><code class="php">&lt;?php
use GraphQL\Type\Definition\Type;
use GraphQL\Type\Definition\ObjectType;

$queryType = new ObjectType([
    'name' =&gt; 'Query',
    'fields' =&gt; [
        'stories' =&gt; [
            'type' =&gt; Type::listOf($storyType),
            'args' =&gt; [
                'filters' =&gt; [
                    'type' =&gt; $filters,
                    'defaultValue' =&gt; [
                        'popular' =&gt; true
                    ]
                ]
            ],
            'resolve' =&gt; function($rootValue, $args) {
                return DataSource::filterStories($args['filters']);
            }
        ]
    ]
]);
</code></pre>

<p>(note that you can define <strong>defaultValue</strong> for fields with complex inputs as associative array).</p>
<p>Then GraphQL query could include filters as literal value:</p>
<pre><code class="graphql">{
    stories(filters: {author: &quot;1&quot;, popular: false})
}
</code></pre>

<p>Or as query variable:</p>
<pre><code class="graphql">query($filters: StoryFiltersInput!) {
    stories(filters: $filters)
}
</code></pre>

<pre><code class="php">$variables = [
    'filters' =&gt; [
        &quot;author&quot; =&gt; &quot;1&quot;,
        &quot;popular&quot; =&gt; false
    ]
];
</code></pre>

<p><strong>graphql-php</strong> will validate the input against your InputObjectType definition and pass it to your 
resolver as <code>$args['filters']</code></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../directives/" class="btn btn-neutral float-right" title="Directives">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../unions/" class="btn btn-neutral" title="Unions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../unions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../directives/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
